<!doctype html>
<html>
  <head>
    <style>
      body {
        height: 1234px;
        padding: 0;
        margin: 0;
      }
    </style>
  </head>
  <body>
    <script type="text/javascript" src="../build/postmate.min.js"></script>
    <script type="text/javascript">

      var parentAPI = null;
      var height = function () { return document.height || document.body.offsetHeight; };
      var foo = "foo";
      var doValidate = function () {
        setTimeout(function () {
          parentAPI.emit('validated', parentAPI.model.uid);
        }, 200);
      };

      new Postmate.Model({ height: height, foo: foo, doValidate: doValidate })
      .then(function (parent) {
        parentAPI = parent;
      });

    </script>
  </body>
</html>
